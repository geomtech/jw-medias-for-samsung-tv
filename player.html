<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">
    <meta name="description" content="Application permettant de lire les contenus vidÃ©os de JW.ORG" />

    <title>JW Broadcasting</title>

    <link rel="stylesheet" type="text/css" href="css/bootstrap.min.css" />
    <link rel="stylesheet" type="text/css" href="css/style.css" />
    <script src="js/jquery.js"></script>
    <script src="js/player.js"></script>
    <script src="js/spatial_navigation.js"></script>
    <style>
        html,
        body {
            max-height: 100vh;
            max-width: 100vw;
            height: 100vh;
            width: 100vw;
        }

        #controls {
            position: absolute;
            bottom: 20px;
            left: 0;
            right: 0;
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0 10px;
            background: rgba(0, 0, 0, 0.5);
            color: #fff;
            opacity: 0;
            transition: opacity 0.3s;
        }

        #progress {
            flex: 1;
            margin: 0 10px;
        }

        #progress input {
            width: 100%;
        }
    </style>
</head>

<body>
    <video autoplay="true" preload="auto" id="player" width="100%" height="100%">
        <p>
            There is a problem with the video. Visit JW.ORG please.
        </p>
    </video>
    <div id="controls">
        <span id="currentTime">0:00</span>
        <div id="progress">
            <input type="range" id="progressBar" value="0" min="0" step="0.1">
        </div>
        <span id="endTime">0:00</span>
        <select id="qualitySelect">
        </select>
    </div>
    <script>
        var playerVideo = document.getElementById("player");
        var controls = document.getElementById("controls");
        var progressBar = document.getElementById("progressBar");
        var currentTimeElem = document.getElementById("currentTime");
        var endTimeElem = document.getElementById("endTime");
        var qualitySelect = document.getElementById("qualitySelect");
        var controlsTimeout;

        function showControls() {
            controls.style.opacity = 1;
            clearTimeout(controlsTimeout);
            controlsTimeout = setTimeout(function () {
                controls.style.opacity = 0;
            }, 3000);
        }

        playerVideo.addEventListener('timeupdate', function () {
            var currentTime = playerVideo.currentTime;
            var duration = playerVideo.duration;
            progressBar.value = (currentTime / duration) * 100;
            currentTimeElem.textContent = formatTime(currentTime);
            endTimeElem.textContent = formatTime(duration);
        });

        progressBar.addEventListener('input', function () {
            var duration = playerVideo.duration;
            playerVideo.currentTime = (progressBar.value / 100) * duration;
        });

        playerVideo.addEventListener('mousemove', showControls);

        function formatTime(seconds) {
            var minutes = Math.floor(seconds / 60);
            seconds = Math.floor(seconds % 60);
            return minutes + ':' + (seconds < 10 ? '0' + seconds : seconds);
        }

        if (playerVideo.requestFullscreen) {
            playerVideo.requestFullscreen();
        } else if (playerVideo.mozRequestFullScreen) {
            playerVideo.mozRequestFullScreen();
        } else if (playerVideo.webkitRequestFullscreen) {
            playerVideo.webkitRequestFullscreen();
        } else if (playerVideo.msRequestFullscreen) {
            playerVideo.msRequestFullscreen();
        }
    </script>
</body>

</html>